# https://testrun.org/tox/latest/config.html

[tox]
skipsdist=True
envlist =
    py3,
    py2,
    flake8

[testenv]
setenv =
	DJANGOENV=test
commands =
    python manage.py test django_cradmin
deps =
    -rrequirements/python3.txt

# Run the tests with python 3.4
[testenv:py3]
basepython = python3

# Run the tests with python 2.7
[testenv:py2]
basepython = python2
deps =
    -rrequirements/python2.txt

# Run the flake8 code quality checks
[testenv:flake8]
basepython = python3
commands =
    flake8


# Configuration for flake8
[flake8]
max-line-length = 120
max-complexity = 10

# Excludes:
# - exclude dev/data.py because that is autogenerated
# - exclude bower_components because some of the components contain .py files.
exclude = .git,.tox,__pycache,bower_components,node_modules,django_cradmin/demo/project/dumps/dev/data.py,docs,django_cradmin/apps/cradmin_imagearchive/migrations/*,django_cradmin/apps/cradmin_temporaryfileuploadstore/migrations/*,django_cradmin/apps/cradmin_generic_token_with_metadata/migrations/*,django_cradmin/demo/webdemo/migrations/*

# See http://flake8.readthedocs.org/en/latest/warnings.html
ignore = E126
